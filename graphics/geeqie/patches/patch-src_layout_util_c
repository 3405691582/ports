Second chunk upstream commit 5ef5596d879a28a9876271fb2d54e1021430aba7

Index: src/layout_util.c
--- src/layout_util.c.orig
+++ src/layout_util.c
@@ -19,6 +19,7 @@
  * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
  */
 
+#include <sys/wait.h>
 #include "main.h"
 #include "layout_util.h"
 
@@ -4167,10 +4167,12 @@ void layout_bars_close(LayoutWindow *lw)
 	layout_bar_close(lw);
 }
 
-static void layout_exif_window_destroy(GtkWidget *widget, gpointer data)
+static gboolean layout_exif_window_destroy(GtkWidget *widget, gpointer data)
 {
 	LayoutWindow *lw = data;
 	lw->exif_window = NULL;
+
+	return TRUE;
 }
 
 void layout_exif_window_new(LayoutWindow *lw)
