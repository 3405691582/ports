Index: ext/mysql_api/extconf.rb
--- ext/mysql_api/extconf.rb.orig
+++ ext/mysql_api/extconf.rb
@@ -76,7 +76,7 @@ IO.foreach('confout') do |l|
   next unless l =~ /errmsg\.h|mysqld_error\.h/
   fn = l.split(/\"/)[1]
   IO.foreach(fn) do |m|
-    if m =~ /^#define\s+([CE]R_[0-9A-Z_]+)/ then
+    if not m =~ /^#define\s+ER_UNKNOWN_ERROR_CODE/ and m =~ /^#define\s+([CE]R_[0-9A-Z_]+)/ then
       error_syms << $1
     end
   end
