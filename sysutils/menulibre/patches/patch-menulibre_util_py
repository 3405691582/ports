Index: menulibre/util.py
--- menulibre/util.py.orig
+++ menulibre/util.py
@@ -21,7 +21,6 @@ import re
 import subprocess
 
 import getpass
-import psutil
 import shutil
 
 from locale import gettext as _
@@ -31,7 +30,6 @@ from gi.repository import GLib, Gdk
 import logging
 logger = logging.getLogger('menulibre')
 
-old_psutil_format = isinstance(psutil.Process.username, property)
 
 
 def enum(**enums):
@@ -102,58 +100,6 @@ def escapeText(text):
     return GLib.markup_escape_text(text)
 
 
-def getProcessUsername(process):
-    """Get the username of the process owner. Return None if fail."""
-    username = None
-
-    try:
-        if old_psutil_format:
-            username = process.username
-        else:
-            username = process.username()
-    except:  # noqa
-        pass
-
-    return username
-
-
-def getProcessName(process):
-    """Get the process name. Return None if fail."""
-    p_name = None
-
-    try:
-        if old_psutil_format:
-            p_name = process.name
-        else:
-            p_name = process.name()
-    except:  # noqa
-        pass
-
-    return p_name
-
-
-def getProcessList():
-    """Return a list of unique process names for the current user."""
-    username = getpass.getuser()
-    try:
-        pids = psutil.get_pid_list()
-    except AttributeError:
-        pids = psutil.pids()
-    processes = []
-    for pid in pids:
-        try:
-            process = psutil.Process(pid)
-            p_user = getProcessUsername(process)
-            if p_user == username:
-                p_name = getProcessName(process)
-                if p_name is not None and p_name not in processes:
-                    processes.append(p_name)
-        except:  # noqa
-            pass
-    processes.sort()
-    return processes
-
-
 def getRelativeName(filename):
     if filename.endswith('.desktop'):
         basename = filename.split('/applications/', 1)[1]
@@ -195,38 +141,7 @@ def getDefaultMenuName():
 
 def getDefaultMenuPrefix(): # noqa
     """Return the default menu prefix."""
-    prefix = os.environ.get('XDG_MENU_PREFIX', '')
-
-    # Cinnamon and MATE don't set this variable
-    if prefix == "":
-        if 'cinnamon' in os.environ.get('DESKTOP_SESSION', ''):
-            prefix = 'cinnamon-'
-        elif 'mate' in os.environ.get('DESKTOP_SESSION', ''):
-            prefix = 'mate-'
-        # Somehow the XDG_MENU_PREFIX isn't exposed in Ubuntu Unity
-        elif 'unity' in os.environ.get('DESKTOP_SESSION', ''):
-            prefix = 'gnome-'
-
-    if prefix == "":
-        desktop = getCurrentDesktop()
-        if desktop == 'plasma':
-            prefix = 'kf5-'
-        elif desktop == 'kde':
-            prefix = 'kde4-'
-
-    if prefix == "":
-        processes = getProcessList()
-        if 'xfce4-panel' in processes:
-            prefix = 'xfce-'
-        elif 'mate-panel' in processes:
-            prefix = 'mate-'
-
-    if len(prefix) == 0:
-        logger.warning("No menu prefix found, MenuLibre will not function "
-                       "properly.")
-
-    return prefix
-
+    return os.environ.get('XDG_MENU_PREFIX', '')
 
 def getMenuDiagnostics():
     diagnostics = {}
