COMMENT=		GCP Cloud SQL Auth proxy

#VERSION=		2.0.0
#PKGNAME=		cloud-sql-proxy-${VERSION}
VERSION=		2.0.0-preview.3
PKGNAME=		cloud-sql-proxy-2.0.0rc3

# cloud-sql-proxy-vendored distfile generated by fetching archive from
# https://github.com/GoogleCloudPlatform/cloud-sql-proxy/archive/v$VERSION/cloud-sql-proxy-$VERSION.tar.gz
# and running "go mod tidy" + "go mod vendor"
DISTNAME=		cloud-sql-proxy-vendored-${VERSION}
MASTER_SITES=		https://distfiles.bsdfrog.org/
ALL_TARGET=		github.com/GoogleCloudPlatform/cloud-sql-proxy

CATEGORIES=		sysutils databases net

MAINTAINER=		Antoine Jacoutot <ajacoutot@openbsd.org>

# Apache-2.0
PERMIT_PACKAGE=		Yes

WANTLIB += c pthread

MODULES=		lang/go

# go/src/github.com/GoogleCloudPlatform/cloud-sql-proxy/Dockerfile
MODGO_LDFLAGS +=	-X main.metadataString=container

.include <bsd.port.mk>
