Index: src/common/tuklib_cpucores.c
--- src/common/tuklib_cpucores.c.orig
+++ src/common/tuklib_cpucores.c
@@ -72,7 +72,11 @@ tuklib_cpucores(void)
 	}
 
 #elif defined(TUKLIB_CPUCORES_SYSCTL)
+#	ifdef HW_NCPUONLINE	/* OpenBSD: number of cpus being used */
+	int name[2] = { CTL_HW, HW_NCPUONLINE };
+#	else
 	int name[2] = { CTL_HW, HW_NCPU };
+#	endif
 	int cpus;
 	size_t cpus_size = sizeof(cpus);
 	if (sysctl(name, 2, &cpus, &cpus_size, NULL, 0) != -1
