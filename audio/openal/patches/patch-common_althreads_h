- Don't assume only Apple can't use C11 threads
  563a1c2e75622a05afdaf0fc139c70c25f86b7a5

Index: common/althreads.h
--- common/althreads.h.orig
+++ common/althreads.h
@@ -9,7 +9,7 @@
 #define WIN32_LEAN_AND_MEAN
 #include <windows.h>
 
-#elif defined(__APPLE__)
+#elif defined(__STDC_NO_THREADS__) || !__has_include(<threads.h>)
 
 #include <pthread.h>
 
@@ -79,7 +79,7 @@ class tss { (public)
     [[nodiscard]]
     auto get() const noexcept -> T { return from_ptr(TlsGetValue(mTss)); }
 
-#elif defined(__APPLE__)
+#elif defined(__STDC_NO_THREADS__) || !__has_include(<threads.h>)
 
     pthread_key_t mTss{};
 
