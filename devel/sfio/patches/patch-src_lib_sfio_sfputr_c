Index: src/lib/sfio/sfputr.c
--- src/lib/sfio/sfputr.c.orig
+++ src/lib/sfio/sfputr.c
@@ -28,7 +28,7 @@ reg int		rc;	/* record separator.	*/
 
 		if(p == 0 || (f->flags&SF_WHOLE) )
 		{	n = strlen(s);
-			if(p >= (n + (rc < 0 ? 0 : 1)) )
+ 			if( !(f->flags&SF_WHOLE) && p >= (n + (rc < 0 ? 0 : 1)) )
 			{	/* buffer can hold everything */
 				if(n > 0)
 				{	memcpy(ps, s, n);
