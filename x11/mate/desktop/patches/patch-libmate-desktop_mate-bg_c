From 7b379f54a5b09df007f7e84dabbbc5f8ce9381a9 Mon Sep 17 00:00:00 2001
From: Colomban Wendling <cwendling@hypra.fr>
Date: Mon, 7 Nov 2022 11:57:51 +0100
Subject: [PATCH] Revert "[mate-bg] small cleanup"

Index: libmate-desktop/mate-bg.c
--- libmate-desktop/mate-bg.c.orig
+++ libmate-desktop/mate-bg.c
@@ -2016,19 +2016,18 @@ static gboolean
 blow_expensive_caches (gpointer data)
 {
 	MateBG *bg = data;
-	GList *list;
+	GList *list, *next;
 
 	bg->blow_caches_id = 0;
 
-	if (bg->file_cache) {
-		for (list = bg->file_cache; list != NULL; list = list->next) {
-			FileCacheEntry *ent = list->data;
+	for (list = bg->file_cache; list != NULL; list = next) {
+		FileCacheEntry *ent = list->data;
+		next = list->next;
 
-			if (ent->type == PIXBUF) {
-				file_cache_entry_delete (ent);
-				bg->file_cache = g_list_delete_link (bg->file_cache,
-								     list);
-			}
+		if (ent->type == PIXBUF) {
+			file_cache_entry_delete (ent);
+			bg->file_cache = g_list_delete_link (bg->file_cache,
+							     list);
 		}
 	}
 
