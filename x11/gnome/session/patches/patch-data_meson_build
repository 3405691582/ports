First chunk:
Needs sharing support in gnome-settings-daemon:
gnome-session-binary[99808]: WARNING: Unable to find required component 'org.gnome.SettingsDaemon.Sharing'

REVERT:
From 76534bcc5e4e0ee38b8541dbb413d4b36d30d9d7 Mon Sep 17 00:00:00 2001
From: Jordan Petridis <jordan@centricular.com>
Date: Sat, 29 Apr 2023 18:02:20 +0300
Subject: [PATCH] Drop consolekit backend and hard depend on systemd

Index: data/meson.build
--- data/meson.build.orig
+++ data/meson.build
@@ -24,7 +24,6 @@ required_components = {
     'org.gnome.SettingsDaemon.PrintNotifications',
     'org.gnome.SettingsDaemon.Rfkill',
     'org.gnome.SettingsDaemon.ScreensaverProxy',
-    'org.gnome.SettingsDaemon.Sharing',
     'org.gnome.SettingsDaemon.Smartcard',
     'org.gnome.SettingsDaemon.Sound',
     'org.gnome.SettingsDaemon.UsbProtection',
@@ -110,6 +109,7 @@ install_data(
   install_dir: join_paths(session_datadir, 'glib-2.0', 'schemas'),
 )
 
+if enable_systemd_session
 unit_conf = configuration_data()
 unit_conf.set('libexecdir', session_libexecdir)
 
@@ -176,6 +176,7 @@ foreach session, req_components: required_components
       session),
   )
 endforeach
+endif
 
 data = files('hardware-compatibility')
 
