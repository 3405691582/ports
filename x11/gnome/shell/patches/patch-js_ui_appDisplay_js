From 2326721561d5b0b82a0bdbf3d7aba5bc14f9cbb7 Mon Sep 17 00:00:00 2001
From: Alessandro Bono <alessandro.bono369@gmail.com>
Date: Fri, 11 Nov 2022 11:47:16 +0100
Subject: [PATCH] appDisplay: Connect to hidden signal after content initialization

Index: js/ui/appDisplay.js
--- js/ui/appDisplay.js.orig
+++ js/ui/appDisplay.js
@@ -1324,9 +1324,12 @@ class AppDisplay extends BaseAppView {
 
         this._placeholder = null;
 
-        Main.overview.connect('hidden', () => this.goToPage(0));
-
-        this._redisplayWorkId = Main.initializeDeferredWork(this, this._redisplay.bind(this));
+        this._overviewHiddenId = 0;
+        this._redisplayWorkId = Main.initializeDeferredWork(this, () => {
+            this._redisplay();
+            if (this._overviewHiddenId === 0)
+                this._overviewHiddenId = Main.overview.connect('hidden', () => this.goToPage(0));
+        });
 
         Shell.AppSystem.get_default().connect('installed-changed', () => {
             Main.queueDeferredWork(this._redisplayWorkId);
