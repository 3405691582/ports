https://gitlab.gnome.org/GNOME/gtksourceview/-/issues/309
https://gitlab.gnome.org/GNOME/gtksourceview/-/merge_requests/322

Index: gtksourceview/gtksourcebufferoutputstream.c
--- gtksourceview/gtksourcebufferoutputstream.c.orig
+++ gtksourceview/gtksourcebufferoutputstream.c
@@ -705,7 +705,8 @@ validate_and_insert (GtkSourceBufferOutputStream *stre
 
 			apply_error_tag (stream);
 
-			if ((nvalid != len || !owned) && buffer[nvalid] != '\0')
+			if (!owned ||
+			    (nvalid != len && buffer[nvalid] != '\0'))
 			{
 				/* make sure the buffer is always properly null
 				 * terminated. This is needed, at least for now,
