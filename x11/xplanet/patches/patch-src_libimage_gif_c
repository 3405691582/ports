Index: src/libimage/gif.c
--- src/libimage/gif.c.orig
+++ src/libimage/gif.c
@@ -36,6 +36,7 @@ read_gif(const char *filename, int *width, int *height
        jumps... */
     int InterlacedOffset[] = { 0, 4, 2, 1 }; 
     int InterlacedJumps[] = { 8, 8, 4, 2 };
+    int giferr = 0;
     ColorMapObject *ColorMap;
 
     int	i, j, Size, Row, Col, Width, Height, ExtCode, Count;
@@ -179,7 +180,7 @@ read_gif(const char *filename, int *width, int *height
 	}
     }
     
-    if (DGifCloseFile(GifFile) == GIF_ERROR) {
+    if (DGifCloseFile(GifFile, &giferr) == GIF_ERROR) {
 	return(0);
     }
 
